<%- include('./partials/header') %>

<div class="container-fluid">
  <div class="row flex-nowrap">
    <!-- Sidebar -->
    <div class="col-auto p-0 bg-light border-end collapse d-md-block" id="sidebarContent">
      <%- include('./partials/sidebar') %>
    </div>

    <!-- Contenido principal -->
    <div class="col px-4">
      <main class="py-4">
        <!-- Encabezado -->
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h1 class="text-primary"><i class="bi bi-calendar-check me-2"></i> Registro de Asistencias</h1>
        </div>

        <!-- Formulario para registrar nueva asistencia -->
        <form action="/asistencias" method="POST" class="row g-3 mb-5">
          <div class="col-md-4">
            <label for="practicante_id" class="form-label">Practicante</label>
            <select name="practicante_id" class="form-select" required>
              <% practicantes.forEach(p => { %>
                <option value="<%= p.id %>"><%= p.nombre %></option>
              <% }) %>
            </select>
          </div>

          <div class="col-md-2">
            <label for="fecha" class="form-label">Fecha</label>
            <input type="date" name="fecha" class="form-control" required>
          </div>

          <div class="col-md-2">
            <label for="hora_entrada" class="form-label">Hora Entrada</label>
            <input type="time" name="hora_entrada" class="form-control" required>
          </div>

          <div class="col-md-2">
            <label for="hora_salida" class="form-label">Hora Salida</label>
            <input type="time" name="hora_salida" class="form-control">
          </div>

          <div class="col-md-2 d-flex align-items-end">
            <button type="submit" class="btn btn-success w-100">
              <i class="bi bi-plus-circle"></i> Registrar
            </button>
          </div>
        </form>

        <!-- Tabla de asistencias registradas -->
        <div class="table-responsive">
          <table class="table table-bordered table-hover">
            <thead class="table-light">
              <tr>
                <th>#</th>
                <th>Practicante</th>
                <th>Fecha</th>
                <th>Hora Entrada</th>
                <th>Hora Salida</th>
              </tr>
            </thead>
            <tbody>
              <% if (asistencias.length > 0) { %>
                <% asistencias.forEach((a, index) => { %>
                  <tr>
                    <td><%= index + 1 %></td>
                    <td><%= a.nombre_practicante %></td>
                    <td><%= a.fecha %></td>
                    <td><%= a.hora_entrada %></td>
                    <td><%= a.hora_salida || '-' %></td>
                  </tr>
                <% }) %>
              <% } else { %>
                <tr>
                  <td colspan="5" class="text-center">No hay asistencias registradas.</td>
                </tr>
              <% } %>
            </tbody>
          </table>
        </div>

        <div class="text-center mt-5">
          <a href="/dashboard" class="btn btn-secondary btn-lg">
            <i class="bi bi-arrow-left-circle"></i> Volver al Dashboard
          </a>
        </div>
      </main>
    </div>
  </div>
</div>

<%- include('./partials/footer') %>
